# 📱 Flutter FeedMedia 产品设计文档

## 一、产品背景

当前主流内容平台采用上下滑动的媒体流交互方式，具备极强的用户粘性与沉浸式体验。本文档旨在规划一个使用 Flutter 构建的 FeedMedia 首页样式的视频/图文流组件，作为轻量化 MVP 版本用于快速测试、验证与扩展。

---

## 二、核心功能

### 1. 滑动流式内容浏览
- 上下滑动切换视频/图片内容
- 滑动流畅，自动加载后续内容

### 2. 视频播放控制
- 当前页视频自动播放，离开时自动暂停
- 单击视频区域切换播放/暂停状态
- 长按视频区域弹出功能菜单（如倍速、保存、不感兴趣）
- 视频资源释放与重建逻辑明确

### 3. 图片支持
- 支持图片/视频混排展示
- 支持多张图片左右滑动切换
- 不支持手势放大缩小

### 4. 互动功能与信息展示
- 点赞、评论、分享等功能区域（UI占位符已实现）
- 视频标题、描述、相关话题展示
- 音频播放指示器

### 5. 内容懒加载
- 上滑至尾部触发新数据加载

### 6. 异常处理
- 加载失败、网络异常提示

---

## 三、产品结构

```text
首页 FeedMediaPage
 └── 滑动容器 FeedMediaPageView（PageView）
      ├── FeedMediaItemPage（视频 / 图片）
      ├── FeedMediaVideoPlayer
      ├── FeedMediaPhotoViewer
      └── FeedMediaOverlayUI
```

---

## 四、用户行为流程

1. 打开 App，加载首页内容流  
2. 用户上下滑动切换内容卡片  
3. 当前视频自动播放，滑走暂停  
4. 用户单击视频区域，切换播放/暂停状态，暂停时进度条常显  
5. 用户长按视频区域，弹出功能菜单（如倍速、保存、不感兴趣）  
6. 用户点击点赞 / 评论 / 分享按钮（UI交互）  
7. 用户点击底部话题，跳转到相关页面  
8. 数据滑动至底部时自动加载下一页  

---

## 五、版本规划

### MVP 版本 (已完成)

- 上下滑动切换  
- 视频播放控制（自动播放/暂停，单击播放/暂停，长按功能弹窗）  
- 图片展示（单图/多图滑动，无手势放大缩小）  
- 懒加载分页  
- 视频封面图加载  
- 底部信息展示（标题、描述、话题）  
- 底部进度条（暂停时常显，播放时隐藏）  
- 基础错误处理（数据加载、视频播放）  

### V1.1 (规划中)

- 点赞 / 评论交互逻辑实现  
- 视频播放速度调节  
- 视频保存功能  
- 更多用户不感兴趣选项  

### V2.0（进阶）(规划中)

- 视频预加载机制  
- 清晰度切换 / 边下边播  
- 弹幕、插页广告支持  
- 视频缓存优化  

---

## 六、关键指标（KPI）

- 首屏加载时间 < 2s  
- 滑动响应 < 16ms 帧延迟  
- 播放器切换释放率: > 95%  
- 图片加载成功率: > 99%  

---

## 七、支持平台

- Android（优先）  
- iOS（需兼容封装播放器）  
- 后续可探索 Web 支持（展示用）